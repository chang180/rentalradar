# 租屋雷達專案 - 最終技術規格

## 🎯 專案目標
- 🏆 **政府平台展示**：成為政府開放資料平台的首個活化應用案例
- 💼 **作品集亮點**：展現AI驅動開發能力和數據分析技能
- 🎯 **求職優勢**：證明全端開發 + AI整合 + 數據分析能力
- 🌟 **吸睛效果**：目前政府平台活化應用欄位為空，成功上架將成為首例

## 🤖 AI主導開發策略
**核心原則：全程由AI主導！**
- 🤖 **AI程式碼生成**：所有程式碼由AI生成和優化
- 🧠 **AI資料分析**：智慧資料清理和異常值檢測
- 🎯 **AI決策支援**：基於數據的技術決策
- 🔄 **AI持續優化**：自動化效能調校和功能改進
- 📊 **AI洞察分析**：深度數據挖掘和趨勢預測

## 🏗️ 技術架構

### 後端技術棧
- **框架**：Laravel 12 + PHP 8.4
- **資料庫**：SQLite (開發) + MySQL (生產)
- **開發環境**：Herd
- **部署環境**：Hostinger共享空間
- **AI整合**：全程AI程式碼生成

### 前端技術棧
- **框架**：React + Laravel Starter Kit
- **地圖**：Leaflet.js + AI優化
- **圖表**：Chart.js
- **樣式**：Tailwind CSS
- **AI整合**：AI驅動的互動體驗

### 資料來源
- **政府資料**：不動產租賃實價登錄資料
- **更新頻率**：每10日 (每月1、11、21日)
- **資料格式**：CSV和XML
- **下載連結**：https://data.moi.gov.tw/MoiOD/System/DownloadFile.aspx?DATA=F85D101E-1453-49B2-892D-36234CF9303D

## 🗄️ 資料庫設計

### 主要資料表
```sql
-- AI租賃資料表
CREATE TABLE ai_rental_data (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    -- 基本資訊
    county VARCHAR(10) NOT NULL,
    district VARCHAR(20) NOT NULL,
    address TEXT NOT NULL,
    rent_date DATE NOT NULL,
    
    -- 價格資訊
    total_amount DECIMAL(12,2) NOT NULL,
    unit_price DECIMAL(10,2),
    rent_type VARCHAR(20),
    
    -- 建物資訊
    building_area DECIMAL(8,2),
    rooms INT,
    living_rooms INT,
    bathrooms INT,
    floor_level INT,
    total_floors INT,
    building_type VARCHAR(50),
    main_purpose VARCHAR(50),
    main_material VARCHAR(50),
    completion_date DATE,
    
    -- 設施資訊
    has_elevator BOOLEAN,
    has_management BOOLEAN,
    has_furniture BOOLEAN,
    has_parking BOOLEAN,
    
    -- AI處理結果
    ai_confidence_score INT DEFAULT 0,
    ai_geocoded_lat DECIMAL(10,8),
    ai_geocoded_lng DECIMAL(11,8),
    ai_processed_at TIMESTAMP,
    ai_anomaly_detected BOOLEAN DEFAULT FALSE,
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

-- AI統計分析表
CREATE TABLE ai_district_analysis (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    county VARCHAR(10) NOT NULL,
    district VARCHAR(20) NOT NULL,
    
    -- AI統計指標
    ai_avg_rent DECIMAL(12,2),
    ai_median_rent DECIMAL(12,2),
    ai_smart_price DECIMAL(12,2),
    ai_price_trend ENUM('up', 'down', 'stable'),
    ai_confidence_level ENUM('high', 'medium', 'low'),
    
    -- AI進階分析
    ai_price_volatility DECIMAL(5,2),
    ai_market_heat_score INT,
    ai_rental_demand_index DECIMAL(5,2),
    
    sample_count INT DEFAULT 0,
    last_analysis_at TIMESTAMP,
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
```

## 🗺️ 地圖系統設計

### Leaflet.js + AI優化
```javascript
// AI驅動的地圖系統
const AIRadarMap = {
    // 1. AI地理編碼整合
    aiGeocoding: {
        providers: ['google', 'opencage', 'nominatim'],
        fallback: true,
        caching: true,
        batchSize: 100
    },
    
    // 2. AI標記聚合
    aiMarkerClustering: {
        maxZoom: 15,
        spiderfyOnMaxZoom: true,
        showCoverageOnHover: false,
        aiClustering: true,
        maxClusterRadius: 50
    },
    
    // 3. AI效能優化
    aiPerformance: {
        maxMarkers: 2000,
        viewportCulling: true,
        lazyLoading: true,
        aiPredictiveLoading: true,
        memoryOptimization: true
    },
    
    // 4. AI熱力圖
    aiHeatmap: {
        radius: 20,
        blur: 15,
        maxZoom: 18,
        aiIntensity: true,
        dynamicRadius: true
    }
};
```

## 🤖 AI功能模組

### 1. AI資料處理器
```php
class AIRentalDataProcessor
{
    public function aiProcessData($rawData)
    {
        // AI智慧清理
        $cleanedData = $this->aiCleanData($rawData);
        
        // AI異常值檢測
        $validatedData = $this->aiDetectAnomalies($cleanedData);
        
        // AI地理編碼
        $geocodedData = $this->aiGeocodeAddresses($validatedData);
        
        // AI統計分析
        return $this->aiStatisticalAnalysis($geocodedData);
    }
}
```

### 2. AI地理編碼系統
```php
class AIGeocodingSystem
{
    public function aiGeocodeAddress($address)
    {
        // AI地址標準化
        $standardizedAddress = $this->aiStandardizeAddress($address);
        
        // AI多來源地理編碼
        $geocodingResults = [
            'google' => $this->aiGoogleGeocoding($standardizedAddress),
            'opencage' => $this->aiOpenCageGeocoding($standardizedAddress),
            'nominatim' => $this->aiNominatimGeocoding($standardizedAddress)
        ];
        
        // AI結果融合與驗證
        return $this->aiFuseGeocodingResults($geocodingResults);
    }
}
```

### 3. AI異常值檢測
```php
class AIAnomalyDetector
{
    public function aiDetectAnomalies($data)
    {
        foreach ($data as $record) {
            // AI價格合理性檢測
            if ($this->aiIsPriceAnomaly($record)) {
                $record['ai_anomaly_detected'] = true;
                $record['ai_confidence_score'] -= 20;
            }
            
            // AI坪數邏輯性檢測
            if ($this->aiIsAreaAnomaly($record)) {
                $record['ai_anomaly_detected'] = true;
                $record['ai_confidence_score'] -= 15;
            }
            
            // AI地理一致性檢測
            if ($this->aiIsLocationAnomaly($record)) {
                $record['ai_anomaly_detected'] = true;
                $record['ai_confidence_score'] -= 10;
            }
        }
        
        return $data;
    }
}
```

### 4. 使用者回報系統
```php
class UserReportSystem
{
    public function processUserReport($reportData, $userId)
    {
        // 使用者身份驗證
        $user = $this->validateUser($userId);
        if (!$user || !$user->is_verified) {
            throw new UnauthorizedException('使用者未驗證');
        }
        
        // 表單驗證
        $validatedData = $this->validateForm($reportData);
        
        // 資料真實性檢測
        $authenticityScore = $this->checkAuthenticity($validatedData);
        
        // 與現有資料比對
        $consistencyScore = $this->checkConsistency($validatedData);
        
        // 計算權重 (驗證使用者權重更高)
        $weightMultiplier = $this->calculateUserWeight($user);
        $confidenceScore = $this->calculateConfidence($authenticityScore, $consistencyScore, $weightMultiplier);
        
        return [
            'data' => $validatedData,
            'confidence_score' => $confidenceScore,
            'user_weight' => $weightMultiplier,
            'verified' => $confidenceScore > 70
        ];
    }
    
    private function calculateUserWeight($user)
    {
        // 驗證使用者權重計算
        $baseWeight = 1.0;
        
        // 使用者信譽度
        $reputationBonus = $user->reputation_score / 100;
        
        // 歷史回報準確度
        $accuracyBonus = $user->historical_accuracy / 100;
        
        // 活躍度獎勵
        $activityBonus = min($user->report_count / 10, 0.5);
        
        return $baseWeight + $reputationBonus + $accuracyBonus + $activityBonus;
    }
    
    private function validateForm($data)
    {
        // 表單驗證
        $rules = [
            'rent_price' => 'required|numeric|min:3000|max:150000',
            'area' => 'required|numeric|min:2|max:80',
            'address' => 'required|string|min:10',
            'room_type' => 'required|in:套房,雅房,整層,其他'
        ];
        
        return $this->validateData($data, $rules);
    }
    
    private function checkAuthenticity($data)
    {
        // 真實性檢測
        $checks = [
            'price_reasonableness' => $this->checkPriceReasonableness($data),
            'area_consistency' => $this->checkAreaConsistency($data),
            'location_accuracy' => $this->checkLocationAccuracy($data),
            'user_behavior' => $this->checkUserBehavior($data)
        ];
        
        return $this->calculateAuthenticityScore($checks);
    }
}
```

## 🚀 開發時程

### Phase 1: AI專案初始化 (1週)
- [ ] 建立Herd專案 (Laravel 12 + React)
- [ ] 設定AI資料處理器
- [ ] 建立政府資料下載機制
- [ ] 設計AI優化資料表結構

### Phase 2: AI資料處理 (2週)
- [ ] 開發AI資料清理演算法
- [ ] 實作AI地理編碼系統
- [ ] 建立AI異常值檢測
- [ ] 優化AI統計分析

### Phase 3: AI地圖系統 (2週)
- [ ] 整合Leaflet.js + React
- [ ] 開發AI優化地圖渲染
- [ ] 實作AI熱力圖功能
- [ ] 建立AI互動式標記

### Phase 4: AI統計分析 (2週)
- [ ] 開發AI趨勢預測
- [ ] 實作AI市場分析
- [ ] 建立AI推薦系統
- [ ] 優化AI效能

### Phase 5: 使用者回報系統 (1週)
- [ ] 開發使用者註冊驗證系統
- [ ] 實作權重計算機制
- [ ] 建立使用者信譽評分
- [ ] 優化回報資料品質

### Phase 6: 政府平台申請 (1週)
- [ ] 準備活化應用申請資料
- [ ] 建立專案展示頁面
- [ ] 準備技術文檔
- [ ] 提交政府平台申請

## 📊 成功指標

### 技術指標
- [ ] AI資料處理準確率 > 95%
- [ ] 地圖載入速度 < 2秒
- [ ] AI統計分析響應 < 1秒
- [ ] 系統穩定性 > 99%

### 展示指標
- [ ] 政府平台活化應用上架成功
- [ ] 作品集網站整合完成
- [ ] 技術文檔完整
- [ ] Demo展示影片製作

### 求職指標
- [ ] 專案在作品集中突出展示
- [ ] 技術面試可完整說明專案
- [ ] 展現AI驅動開發能力
- [ ] 證明全端開發技能

---

**🚀 專案代號**: RentalRadar  
**👨‍💻 開發模式**: 全程AI主導  
**📅 預計完成**: 9週 (新增使用者回報系統)  
**🎯 最終目標**: 政府平台活化應用展示 + 作品集亮點
