{
  "task": "DEV-20 進階 AI 模型整合開發 - 完整任務指示",
  "description": "Codex 需要完成 DEV-20 剩餘的 25% 工作，達到 100% 完成度",
  "current_progress": "75%",
  "target_progress": "100%",
  "estimated_completion_time": "60 minutes",
  
  "phase_1_immediate_tasks": {
    "title": "🔥 高優先級 - 立即處理 (15 分鐘)",
    "tasks": [
      {
        "id": "optimized-data-contract-test",
        "title": "建立 /api/map/optimized-data 輕量級合約測試",
        "description": "當聚合數量超過閾值時測試替代負載",
        "steps": [
          "在 tests/Feature/AdvancedPricePredictionTest.php 中新增測試方法",
          "模擬大量聚合資料 (> 100 個聚合)",
          "驗證 API 回應包含正確的效能指標",
          "確保替代負載格式正確"
        ],
        "files_to_modify": [
          "tests/Feature/AdvancedPricePredictionTest.php"
        ],
        "expected_outcome": "新增測試通過，覆蓋高負載情況"
      }
    ]
  },
  
  "phase_2_core_tasks": {
    "title": "🔶 中優先級 - 核心功能 (35 分鐘)",
    "tasks": [
      {
        "id": "cross-language-consistency",
        "title": "建立跨語言 (PHP/JS) 模型輸出驗證與測試基準",
        "description": "確保前後端模型輸出一致性",
        "steps": [
          "建立 tests/Feature/ModelConsistencyTest.php",
          "實作 PHP 和 JavaScript 模型輸出比較測試",
          "驗證 AdvancedPricePredictor 和 ClusteringAlgorithm 輸出一致",
          "建立模型輸出差異檢測機制",
          "確保信心度計算在前後端一致"
        ],
        "files_to_modify": [
          "tests/Feature/ModelConsistencyTest.php (新建)",
          "resources/js/algorithms/ClusteringAlgorithm.js",
          "app/Support/AdvancedPricePredictor.php"
        ],
        "expected_outcome": "前後端模型輸出一致性驗證通過"
      },
      {
        "id": "performance-monitoring-enhancement",
        "title": "擴充效能監控指標",
        "description": "追蹤模型推論延遲與資源使用",
        "steps": [
          "在 PerformanceMonitor 中新增模型推論時間追蹤",
          "實作記憶體使用量監控",
          "在 MapController 中整合效能指標收集",
          "建立模型效能基準測試",
          "新增效能警告機制"
        ],
        "files_to_modify": [
          "app/Support/PerformanceMonitor.php",
          "app/Http/Controllers/MapController.php",
          "tests/Feature/PerformanceMonitoringTest.php (新建)"
        ],
        "expected_outcome": "完整的效能監控指標收集和報告"
      }
    ]
  },
  
  "phase_3_documentation": {
    "title": "🔵 低優先級 - 文檔完善 (10 分鐘)",
    "tasks": [
      {
        "id": "hostinger-deployment-guide",
        "title": "規劃 Hostinger 共享環境下的模型部署流程",
        "description": "確保在 Hostinger 限制下的模型部署",
        "steps": [
          "建立 docs/deployment/hostinger-model-deployment.md",
          "記錄 Hostinger 共享主機的限制",
          "提供模型部署最佳實踐",
          "建立效能優化建議",
          "記錄故障排除指南"
        ],
        "files_to_modify": [
          "docs/deployment/hostinger-model-deployment.md (新建)",
          "docs/deployment/README.md (更新)"
        ],
        "expected_outcome": "完整的 Hostinger 部署文檔"
      }
    ]
  },
  
  "completion_criteria": {
    "title": "🎯 完成標準",
    "criteria": [
      "所有 API 端點測試通過 (100%)",
      "跨語言模型輸出一致性驗證通過",
      "效能監控指標完整且準確",
      "Hostinger 部署文檔完整",
      "所有新增測試通過",
      "程式碼品質符合專案標準"
    ]
  },
  
  "testing_requirements": {
    "title": "🧪 測試要求",
    "requirements": [
      "執行 php artisan test tests/Feature/AdvancedPricePredictionTest.php",
      "執行 php artisan test tests/Feature/ModelConsistencyTest.php",
      "執行 php artisan test tests/Feature/PerformanceMonitoringTest.php",
      "所有測試必須 100% 通過",
      "新增測試覆蓋率 > 80%"
    ]
  },
  
  "deliverables": {
    "title": "📦 交付物",
    "items": [
      "完整的 API 測試套件",
      "跨語言模型一致性驗證",
      "效能監控系統",
      "Hostinger 部署文檔",
      "更新的 PROGRESS.md (100% 完成度)"
    ]
  },
  
  "success_metrics": {
    "title": "📊 成功指標",
    "metrics": [
      "DEV-20 進度: 75% → 100%",
      "測試通過率: 100%",
      "程式碼覆蓋率: > 80%",
      "效能監控: 完整",
      "文檔完整性: 100%"
    ]
  }
}
